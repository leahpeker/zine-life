import{w as r}from"./DJyLtpc6.js";const n={user:null,loading:!1,error:null},o=r(n),a="http://localhost:8000",u={async checkAuth(){o.update(e=>({...e,loading:!0,error:null}));try{const e=await fetch(`${a}/auth/me`,{credentials:"include"});if(e.ok){const t=await e.json();o.update(l=>({...l,user:t,loading:!1}))}else o.update(t=>({...t,user:null,loading:!1}))}catch{o.update(t=>({...t,user:null,loading:!1,error:"Authentication check failed"}))}},async logout(){o.update(e=>({...e,loading:!0,error:null}));try{if((await fetch(`${a}/auth/logout`,{method:"POST",credentials:"include"})).ok)o.update(t=>({...t,user:null,loading:!1}));else throw new Error("Logout failed")}catch{o.update(t=>({...t,loading:!1,error:"Logout failed"}))}},signInWithGoogle(){window.location.href=`${a}/auth/google`}};export{u as a,o as b};
